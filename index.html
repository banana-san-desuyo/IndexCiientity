<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>CII Entity Generator</title>

<style>
body{
    background:#0f1115;
    color:#e4e4e4;
    font-family:monospace;
    padding:20px;
}
h2{
    color:#9ad1ff;
}
button{
    padding:10px 20px;
    background:#1c1f26;
    color:#fff;
    border:1px solid #444;
    cursor:pointer;
}
button:hover{
    background:#2a2f38;
}
textarea{
    width:100%;
    height:500px;
    background:#000;
    color:#00ff88;
    margin-top:20px;
    padding:10px;
    border:1px solid #333;
}
select{
    padding:5px;
    margin-left:10px;
}
</style>
</head>

<body>

<h2>CII Random Entity Generator</h2>

<label>ACCESS Level:
<select id="level">
<option value="1">Lv.1</option>
<option value="2">Lv.2</option>
<option value="3">Lv.3</option>
<option value="4">Lv.4</option>
</select>
</label>

<button onclick="generateEntity()">Generate</button>

<textarea id="output" readonly></textarea>

<script>

// ==== 番号重複防止 ====
let usedNumbers = new Set();

// ==== 基本データ ====
const statuses = ["Active","Dormant","Archived","Sealed"];
const types = ["II-空間","II-現象","II-生体","UI-物質"];

// ==== テキスト素材 ====
const overviewLines = [
"当該対象は局所的な現実構造の歪曲を伴う特異存在である。",
"観測対象は通常物理法則と一致しない振る舞いを示す。",
"内部空間構造は外部寸法と一致しない可能性が高い。",
"知覚干渉を引き起こす低強度の認識改変波形が確認されている。",
"対象は限定的条件下でのみ出現が確認される。",
"時間認識の遅延または圧縮が報告されている。",
"対象内部では方位感覚が著しく低下する。",
"観測時、空間反響値が異常上昇する。"
];

const recordLines = [
"初期発見は地方監視班による定期巡回中であった。",
"熱源反応は検出されなかった。",
"記録機器の一部が同期不能状態に陥った。",
"対象への接近時、電子機器に軽微なノイズが発生。",
"接触実験は安全規定により中止された。",
"音響反射が通常値と一致しない。",
"監視映像に断続的なフレーム欠落が発生。"
];

const damageLines = [
"直接的な物理被害は軽微。",
"精神的圧迫感を訴える報告が複数存在。",
"長時間滞在者に軽度の記憶混濁。",
"被害規模は限定的である。",
"恒常的な人体損傷は未確認。"
];

const classificationLines = [
"CII基準に基づき暫定分類。",
"危険度は干渉範囲を基準に決定。",
"再評価により分類変更の可能性あり。",
"観測回数増加により再審議予定。"
];

const supplementLines = [
"対象周辺では異常な静寂が確認される。",
"環境温度変化は検出されない。",
"再現性は低い。",
"意図的発生は確認されていない。",
"発生周期は不定。"
];

const coreLines = [
"CORE審議により監視継続決定。",
"封鎖措置は見送られた。",
"局所隔離プロトコル適用。",
"危険度再評価を保留。"
];

// ==== ユーティリティ ====
function randomFrom(arr){
    return arr[Math.floor(Math.random()*arr.length)];
}

function shuffle(arr){
    return arr.sort(()=>Math.random()-0.5);
}

function buildSection(source){
    let pool = shuffle([...source]);
    let text = "";
    let index = 0;

    while(text.length < 1800){
        if(index >= pool.length){
            pool = shuffle([...source]);
            index = 0;
        }
        text += pool[index++] + "\n";
    }
    return text;
}

function generateNumber(){
    let num;
    do{
        num = Math.floor(Math.random()*9000)+1000;
    }while(usedNumbers.has(num));

    usedNumbers.add(num);
    return num;
}

// ==== メイン生成 ====
function generateEntity(){

    const level = document.getElementById("level").value;
    const fileNum = generateNumber();
    const type = randomFrom(types);
    const status = randomFrom(statuses);

    let text = 
`CII/CL/File-${fileNum}
Classification: Entity-${fileNum} (${type})
ACCESS: Lv.${level}
Status: ${status}
─────
■ 概要
─────
${buildSection(overviewLines)}
─────
■ 観測記録
─────
${buildSection(recordLines)}
─────
■ 被害状況
─────
${buildSection(damageLines)}
─────
■ 分類経緯
─────
${buildSection(classificationLines)}
─────
■ 補足
─────
${buildSection(supplementLines)}
─────
■ CORE審議履歴（該当時）
─────
${buildSection(coreLines)}
────────────────`;

    document.getElementById("output").value = text;
}

</script>

</body>
</html>
